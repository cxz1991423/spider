(function(a){a.validator.setDefaults({debug:true,ignoreTitle:true,errorPlacement:function(c,d){var e=a(d).qtip("api");if(e){e.destroy()}a(d).qtip({position:{target:a(d),at:"center left",my:"right center"},content:c.html()})},success:function(c){var d=a("#"+c.attr("for"));var e=a(d).qtip("api");if(e){e.destroy()}}});function b(d){var e=0;for(var c=0;c<d.length;c++){e++;if(escape(d.charAt(c)).indexOf("%u")!=-1){e++}}return e}a.extend(true,a.validator,{vAttribute:"validate",classRules:function(d){var e={};var c=a(d).attr(this.vAttribute);c&&a.each(c.split(" "),function(){if(this in a.validator.classRuleSettings){a.extend(e,a.validator.classRuleSettings[this])}});return e},staticRules:function(c){if(!a.metadata){return{}}a.metadata.setType("validate",this.vAttribute);var e=a.data(c.form,"validator").settings.meta;var d=e?a(c).metadata()[e]:a(c).metadata();if(d){delete d.metadata}return d},prototype:{elements:function(){var d=this,c={};return a([]).add(a.makeArray(this.currentForm.elements)).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&d.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in c||!d.objectLength(a(this).rules())){return false}c[this.name]=true;return true})}},methods:{maxlength:function(d,c,e){return this.optional(c)||(this.getLength(a.trim(d),c)<=e&&b(d)<=e)}}});a.extend(a.fn,{validRules:function(c){var d=a.data(this[0],"validator");var g=c.rules;delete c.rules;a.extend(d.settings,c);d.init();for(var e in g){var f=a(this[0]).find("[name="+e+"]");if(typeof f.rules==="function"){f.rules("add",g[e])}}}})})(jQuery);jQuery.validator.addMethod("regex",function(b,a,c){var d=new RegExp(c);return d.test(b)},jQuery.validator.format("内容不符合正则表达式：{0}"));jQuery.validator.addMethod("maxWords",function(b,a,c){return this.optional(a)||b.match(/\b\w+\b/g).length<c},jQuery.validator.format("Please enter {0} words or less."));jQuery.validator.addMethod("minWords",function(b,a,c){return this.optional(a)||b.match(/\b\w+\b/g).length>=c},jQuery.validator.format("Please enter at least {0} words."));jQuery.validator.addMethod("rangeWords",function(b,a,c){return this.optional(a)||b.match(/\b\w+\b/g).length>=c[0]&&b.match(/bw+b/g).length<c[1]},jQuery.validator.format("Please enter between {0} and {1} words."));jQuery.validator.addMethod("letterswithbasicpunc",function(b,a){return this.optional(a)||/^[a-z-.,()'\"\s]+$/i.test(b)},"Letters or punctuation only please");jQuery.validator.addMethod("alphanumeric",function(b,a){return this.optional(a)||/^\w+$/i.test(b)},"Letters, numbers, spaces or underscores only please");jQuery.validator.addMethod("lettersonly",function(b,a){return this.optional(a)||/^[a-z]+$/i.test(b)},"Letters only please");jQuery.validator.addMethod("nowhitespace",function(b,a){return this.optional(a)||/^\S+$/i.test(b)},"No white space please");jQuery.validator.addMethod("ziprange",function(b,a){return this.optional(a)||/^90[2-5]\d\{2}-\d{4}$/.test(b)},"Your ZIP-code must be in the range 902xx-xxxx to 905-xx-xxxx");jQuery.validator.addMethod("time",function(b,a){return this.optional(a)||/^([01][0-9])|(2[0123]):([0-5])([0-9])$/.test(b)},"Please enter a valid time, between 00:00 and 23:59");jQuery.validator.addMethod("phone",function(a,b){a=a.replace(/\s+/g,"");return this.optional(b)||a.length>9&&a.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)},"Please specify a valid phone number");jQuery.validator.addMethod("strippedminlength",function(b,a,c){return jQuery(b).text().length>=c},jQuery.validator.format("Please enter at least {0} characters"));jQuery.validator.addMethod("email2",function(b,a,c){return this.optional(a)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(b)},jQuery.validator.messages.email);jQuery.validator.addMethod("url2",function(b,a,c){return this.optional(a)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(b)},jQuery.validator.messages.url);jQuery.validator.addMethod("creditcardtypes",function(b,a,c){if(/[^0-9-]+/.test(b)){return false}b=b.replace(/\D/g,"");var d=0;if(c.mastercard){d|=1}if(c.visa){d|=2}if(c.amex){d|=4}if(c.dinersclub){d|=8}if(c.enroute){d|=16}if(c.discover){d|=32}if(c.jcb){d|=64}if(c.unknown){d|=128}if(c.all){d=1|2|4|8|16|32|64|128}if(d&1&&/^(51|52|53|54|55)/.test(b)){return b.length==16}if(d&2&&/^(4)/.test(b)){return b.length==16}if(d&4&&/^(34|37)/.test(b)){return b.length==15}if(d&8&&/^(300|301|302|303|304|305|36|38)/.test(b)){return b.length==14}if(d&16&&/^(2014|2149)/.test(b)){return b.length==15}if(d&32&&/^(6011)/.test(b)){return b.length==16}if(d&64&&/^(3)/.test(b)){return b.length==16}if(d&64&&/^(2131|1800)/.test(b)){return b.length==15}if(d&128){return true}return false},"Please enter a valid credit card number.");